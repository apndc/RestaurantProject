<!DOCTYPE html>
<html>
<head>
    <title>üçΩÔ∏è BookIt Sign Up Page</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<header>
    <a href="{{ url_for('home') }}" class="logo">üçΩÔ∏è BookIt</a>
</header>

<body>
<main class="sign_page">
    <section class="sign_page">
        <h1>Sign Up</h1>
        <form method="post" action="/createaccount" class="form-grid" id="signupForm">

            <!-- Error display -->
            <div id="errorModal" style="color:red;">
                {% if error %}
                    {{ error }}
                {% endif %}
            </div>

            <!-- Name Fields -->
            <div class="form-grid two-col">
                <div>
                    <label for="FirstName">First Name:</label>
                    <input type="text" id="FirstName" name="FirstName" value="{{ request.form.get('FirstName','') }}" required/>
                </div>
                <div>
                    <label for="LastName">Last Name:</label>
                    <input type="text" id="LastName" name="LastName" value="{{ request.form.get('LastName','') }}" required/> 
                </div>
            </div>

            <!-- Email and Phone -->
            <div class="form-grid two-col">
                <div>
                    <label for="Email">Email:</label>
                    <input type="email" id="Email" name="Email" value="{{ request.form.get('Email','') }}" required/>
                </div>
                <div>
                    <label for="PhoneNumber">Phone Number: </label>
                    <input type="tel" id="PhoneNumber" name="PhoneNumber" value="{{ request.form.get('PhoneNumber','') }}" pattern="[0-9]{10}" />
                </div>
            </div>

            <!-- Address -->
            <div class="form-grid two-col">
                <div>
                    <label for="StreetName">Street Name:</label>
                    <input type="text" id="StreetName" name="StreetName" value="{{ request.form.get('StreetName','') }}" required/>
                </div>
                <div>
                    <label for="City">City:</label>
                    <input type="text" id="City" name="City" value="{{ request.form.get('City','') }}" required/> 
                </div>
            </div>
            <div class="form-grid two-col">
                <div>
                    <label for="State">State:</label>
                    <input type="text" id="State" name="State" value="{{ request.form.get('State','') }}" required/>
                </div>
                <div>
                    <label for="ZipCode">Zip Code:</label>
                    <input type="text" id="ZipCode" name="ZipCode" value="{{ request.form.get('ZipCode','') }}" required/> 
                </div>
            </div>

            <!-- Role Selection -->
            <div class="form-grid two-col">
                <label>Role:</label>
                <div>
                    <label><input type="radio" name="Role" value="CUSTOMER" {% if request.form.get('Role','CUSTOMER')=='CUSTOMER' %}checked{% endif %}> Customer</label>
                    <label><input type="radio" name="Role" value="EVENT_PLANNER" {% if request.form.get('Role')=='EVENT_PLANNER' %}checked{% endif %}> Event Planner</label>
                    <label><input type="radio" name="Role" value="RESTAURANT_OWNER" {% if request.form.get('Role')=='RESTAURANT_OWNER' %}checked{% endif %}> Restaurant Owner</label>
                </div>
            </div>

            <!-- Verification Modal -->
            <div id="verificationModal" style="display:none; margin-top:10px; border:1px solid #ccc; padding:10px;">
                <h3>Enter Verification Code</h3>
                <input type="text" name="verification_code" value="{{ request.form.get('verification_code','') }}" placeholder="Verification Code">
            </div>

            <!-- Password -->
            <div class="form-grid two-col">
                <div>
                    <label for="Password">Password:</label>
                    <input type="password" id="Password" name="Password" required>
                </div>
                <div>
                    <input type="submit" value="Submit"> 
                </div>
            </div>

        </form>     

        <a href="/"><button type="button" id="home">Home</button></a>

    </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const roleRadios = document.querySelectorAll('input[name="Role"]');
    const modal = document.getElementById('verificationModal');

    function toggleModal() {
        const selectedRole = document.querySelector('input[name="Role"]:checked').value;
        if (selectedRole === 'EVENT_PLANNER' || selectedRole === 'RESTAURANT_OWNER') {
            modal.style.display = 'block';
        } else {
            modal.style.display = 'none';
        }
    }

    // Initialize modal display on page load
    toggleModal();

    // Update modal when role changes
    roleRadios.forEach(radio => {
        radio.addEventListener('change', toggleModal);
    });
});
</script>

</body>
</html>
