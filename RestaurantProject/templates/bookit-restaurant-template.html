<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookIt - {{ restaurant.Name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="{{ url_for('home') }}" class="logo">üçΩÔ∏è BookIt</a>
        <div class="logo">
            <h1>{{ restaurant.Name }}</h1>
        </div>
    </header>

    <!-- Restaurant Info Section -->
    <main class="restaurant-container">
        <!-- Restaurant Image and Name -->
        <section class="restaurant-header">
            <img src="{{ url_for('static', filename='assets/restaurant-placeholder.jpg') }}" alt="Restaurant Image" class="restaurant-image">
            <h2 class="restaurant-name">{{ restaurant.Description }}</h2>
        </section>
        
        <!-- Restaurant Details and Menu -->
        <section class="restaurant-details-menu">
            <!-- Left side: details -->
            <h2>Location</h2>
            <div class="restaurant-details">
                <p><strong>Street:</strong> {{ restaurant.location.StreetName }}</p>
                <p><strong>City:</strong> {{ restaurant.location.City }}</p>
                <p><strong>State:</strong> {{ restaurant.location.State }}</p>
                <p><strong>Zip Code:</strong> {{ restaurant.location.ZipCode }}</p>
                <a href="https://maps.google.com/?q={{fullLocation}}" target="_blank"><button>Open In Google Maps</button></a>
            </div>

            <!-- Right side: menu -->
            <div class="restaurant-menu">
                <h2>Menu</h2>
                {% for category, items in categories %}
                <h3>{{ category }}</h3>
                <ul>
                    {% for item in items %}
                        <li>
                            <strong>{{ item.ItemName }} --- {{ item.Price | dollars }}</strong>
                            <br>
                            <i>{{ item.Description }}</i>
                        </li>
                    {% endfor %}
                </ul>
                {% endfor %}
            </div>
        </section>

<!-- Reservation Section -->
<section class="reservation-section">
    <button id="reserveBtn" class="reserve-button">Make Reservation</button>

    <div id="reservationForm" class="reservation-form" style="display:none;">
        <h3>Reservation Information</h3>

        <form action="{{ url_for('reservation') }}" method="POST">

            <!-- Auto-filled User Fields -->
            <label>First Name:</label>
            <input type="text" name="firstName" 
                value="{{ session.get('user_name').split()[0] if session.get('user_name') else '' }}" 
                readonly>

            <label>Last Name:</label>
            <input type="text" name="lastName" 
                value="{{ session.get('user_name').split()[1] if session.get('user_name') else '' }}" 
                readonly>

            <label>Email:</label>
            <input type="email" name="email" 
                value="{{ session.get('user_email') }}" readonly>

            <!-- Hidden restaurant ID to match Reservation.RID -->
            <input type="hidden" name="RID" value="{{ restaurant.RID }}">

            <!-- Date -->
            <label>Reservation Date:</label>
            <input type="date" name="date" required>

            <!-- Time -->
            <label>Reservation Time:</label>
            <input type="time" name="time" required>

            <!-- Guests -->
            <label>Number of Guests:</label>
            <input type="number" name="guests" min="1" max="20" required>

            <!-- Special Occasion -->
            <label>Special Event (optional):</label>
            <input type="text" name="event" placeholder="Birthday, anniversary, etc.">

            <!-- Special Requests -->
            <label>Special Accommodations (optional):</label>
            <textarea name="accommodations"
                placeholder="Allergies, wheelchair access, high chair, etc."></textarea>

            <button type="submit">Submit Reservation</button>
        </form>
    </div>
</section>

        <section class="backButton">
            <a href="/restaurant"><button>Return To Restaurant View</button></a>
        </section>
    </main>
<script>
    const btn = document.getElementById("reserveBtn");
    const form = document.getElementById("reservationForm");

    btn.addEventListener("click", () => {
        form.style.display = (form.style.display === "none") ? "block" : "none";
    });
</script>
</body>
</html>