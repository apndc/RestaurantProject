{% extends "header.html" %}
{% block title %}BookIt â€” {{ restaurant.Name }} {% endblock %}
{% block content %}
    <div class="restaurant-card">
        <!-- Restaurant Image and Name -->
         <h1 class="restaurant-title">{{ restaurant.Name }}</h1>
        <section class="restaurant-header">
            <img src="{{ url_for('static', filename='assets/restaurant-placeholder.jpg') }}" alt="Restaurant Image" class="restaurant-image">
            <h2 class="restaurant-name">{{ restaurant.Description }}</h2>
        </section>
        
        <!-- Restaurant Details and Menu -->
        <section class="restaurant-details-menu">
            <!-- Left side: details -->
            <h2>Location</h2>
            <div class="restaurant-details">
                <p><strong>Street:</strong> {{ restaurant.location.StreetName }}</p>
                <p><strong>City:</strong> {{ restaurant.location.City }}</p>
                <p><strong>State:</strong> {{ restaurant.location.State }}</p>
                <p><strong>Zip Code:</strong> {{ restaurant.location.ZipCode }}</p>
                <a href="https://maps.google.com/?q={{fullLocation}}" target="_blank"><button>Open In Google Maps</button></a>
            </div>

            <!-- Right side: menu -->
            <div class="restaurant-menu">
                <h2>Menu</h2>
                {% for category, items in categories %}
                <h3>{{ category }}</h3>
                <ul>
                    {% for item in items %}
                        <li>
                            <strong>{{ item.ItemName }} --- {{ item.Price | dollars }}</strong>
                            <br>
                            <i>{{ item.Description }}</i>
                        </li>
                    {% endfor %}
                </ul>
                {% endfor %}
            </div>
        </section>

<!-- Reservation Section -->
<section class="reservation-section">
    <button id="reserveBtn" class="reserve-button">Make Reservation</button>

    <div id="reservationForm" class="reservation-form" style="display:none;">
        <h3>Reservation Information</h3>

        <form action="{{ url_for('reservation') }}" method="POST">

            <!-- Auto-filled User Fields -->
            <input type="text" name="firstName" 
            value="{{ session.get('first_name', '') }}" readonly>

            <input type="text" name="lastName" 
            value="{{ session.get('last_name', '') }}" readonly>

            <input type="email" name="email" 
            value="{{ session.get('email', '') }}" readonly>

            <!-- Hidden restaurant ID to match Reservation.RID -->
            <input type="hidden" name="RID" value="{{ restaurant.RID }}">

            <!-- Date -->
            <label>Reservation Date:</label>
            <input type="date" name="date" required>

            <!-- Time -->
            <label>Reservation Time:</label>
            <input type="time" name="time" required>

            <!-- Guests -->
            <label>Number of Guests:</label>
            <input type="number" name="guests" min="1" max="20" required>

            <!-- Special Occasion -->
            <label>Special Event (optional):</label>
            <input type="text" name="event" placeholder="Birthday, anniversary, etc.">

            <!-- Special Requests -->
            <label>Special Accommodations (optional):</label>
            <textarea name="accommodations"
                placeholder="Allergies, wheelchair access, high chair, etc."></textarea>

            <button type="submit">Submit Reservation</button>
        </form>
    </div>
</section>

        <section class="backButton">
            <a href="/restaurant"><button style="text-align: center;">Return To Restaurant View</button></a>
        </section>
    </div>

<script>
document.getElementById("reserveBtn").addEventListener("click", function () {
    let form = document.getElementById("reservationForm");
    form.style.display = (form.style.display === "none") ? "block" : "none";
});
</script>
{% endblock %}