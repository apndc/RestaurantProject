<!doctype html>
<html>
  <head>
    <title>{% block title %}BookIt{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  
  <body>
    <header>
    <nav style="display:flex; justify-content:space-between; align-items:center; padding:10px 20px; background:#f8f8f8; border-bottom:1px solid #ddd; width:100%;">
    <!-- Logo -->
    <a href="{{ url_for('dashboard') }}" class="logo">üçΩÔ∏è BookIt</a>

    <!-- User Menu container aligned to top-right -->
    <div style="margin-left:auto; position:relative;">
        <button id="userMenuBtn" style="background:none; border:none; cursor:pointer; color: var(--brown); font-weight:bold;">
            {{ user_name or 'My Profile' }} ‚ñº
        </button>

        <!-- Dropdown Menu -->
        <div id="userDropdown" style="display:none; position:absolute; right:0; top:100%; background:#fff; border:1px solid #ddd; border-radius:5px; box-shadow:0 2px 5px rgba(0,0,0,0.2); min-width:150px; z-index:100;">
            <a href="{{ url_for('edit_account') }}" style="display:block; padding:10px; text-decoration:none; color:#333;">Edit Account</a>
            <button id="deleteBtnNav" style="display:block; width:100%; padding:10px; border:none; background:none; text-align:left; color:red; cursor:pointer;">Delete Account</button>
            <a href="{{ url_for('logout') }}" style="display:block; padding:10px; text-decoration:none; color:#333;">Log Out</a>
        </div>
    </div>
</nav>

  </header>
    <main>
        {% block content %}{% endblock %}
    </main>
  </body>

  <script>
    const userMenuBtn = document.getElementById('userMenuBtn');
    const userDropdown = document.getElementById('userDropdown');

    userMenuBtn.addEventListener('click', () => {
      userDropdown.style.display = (userDropdown.style.display === 'block') ? 'none' : 'block';
    });

    // Close dropdown if clicked outside
    document.addEventListener('click', (e) => {
      if (!userMenuBtn.contains(e.target) && !userDropdown.contains(e.target)) {
        userDropdown.style.display = 'none';
      }
    });

    // Delete Account Modal
    const deleteBtnNav = document.getElementById('deleteBtnNav');
    const deleteModal = document.getElementById('deleteModal');
    const cancelDelete = document.getElementById('cancelDelete');

    deleteBtnNav.addEventListener('click', () => {
      deleteModal.style.display = 'flex';
    });

    cancelDelete.addEventListener('click', () => {
      deleteModal.style.display = 'none';
    });
  </script>

</html>
